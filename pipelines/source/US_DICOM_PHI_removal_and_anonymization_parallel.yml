---
authors: Sandip Samal <sandip.samal@childrens.harvard.edu>
name: "Ultra Sound DICOM anonymization including PHI removal in parallel branches v20231214"
description: Remove PHI burned on US DICOM images, anonymize the dicom headers, and finally push to a PACS via orthanc
  in parallel
category: Medical Imaging
locked: false
plugin_tree:
  - title: root-group-copy-2
    plugin: pl-simpledsapp v2.1.3
    previous: ~
    plugin_parameter_defaults:
      prefix: 0-
      pftelDB: "http://192.168.0.14:22223/api/v1/default/us_dicom_2/"
  - title: multiframe-dcms-2
    plugin: pl-dicom_filter v1.0.2
    previous: root-group-copy-2
    plugin_parameter_defaults:
      outputType: dcm
      dicomFilter: '{"SOPClassUID":"Ultrasound Multi-frame Image Storage"}'
      pftelDB: "http://192.168.0.14:22223/api/v1/default/us_dicom_2/"
  - title: image-dcms-2
    plugin: pl-dicom_filter v1.0.2
    previous: root-group-copy-2
    plugin_parameter_defaults:
      outputType: dcm
      dicomFilter: '{"SOPClassUID":"Ultrasound Image Storage"}'
      pftelDB: "http://192.168.0.14:22223/api/v1/default/us_dicom_2/"
  - title: report-dcms-2
    plugin: pl-dicom_filter v1.0.2
    previous: root-group-copy-2
    plugin_parameter_defaults:
      outputType: dcm
      dicomFilter: '{"SOPClassUID":"Secondary Capture Image Storage"}'
      pftelDB: "http://192.168.0.14:22223/api/v1/default/us_dicom_2/"
  - title: unpacked-dcms-2
    plugin: pl-dicom_unpack v1.1.2                
    previous: multiframe-dcms-2
    plugin_parameter_defaults:
      fileFilter: dcm
      pftelDB: "http://192.168.0.14:22223/api/v1/default/us_dicom_2/"
  - title: unpacked-pngs-2
    plugin: pl-dicom_filter v1.0.2
    previous: unpacked-dcms-2
    plugin_parameter_defaults:
      fileFilter: dcm
      outputType: png
      pftelDB: "http://192.168.0.14:22223/api/v1/default/us_dicom_2/"
  - title: image-pngs-2
    plugin: pl-dicom_filter v1.0.2
    previous: image-dcms-2
    plugin_parameter_defaults:
      fileFilter: dcm
      outputType: png
      pftelDB: "http://192.168.0.14:22223/api/v1/default/us_dicom_2/"
  - title: phi-removed-unpacked-pngs-2
    plugin: pl-image_textremove v1.0.2
    previous: unpacked-pngs-2
    plugin_parameter_defaults:
      fileFilter: png
      outputType: png
      pftelDB: "http://192.168.0.14:22223/api/v1/default/us_dicom_2/"
  - title: phi-removed-image-pngs-2
    plugin: pl-image_textremove v1.0.2
    previous: image-pngs-2
    plugin_parameter_defaults:
      fileFilter: png
      outputType: png
      pftelDB: "http://192.168.0.14:22223/api/v1/default/us_dicom_2/"
  - title: unpacked-dcms-and-phi-removed-pngs-2
    plugin: pl-topologicalcopy v1.0.2
    previous: unpacked-dcms-2
    plugin_parameter_defaults:
      plugininstances: unpacked-dcms-2,phi-removed-unpacked-pngs-2
      filter: \.dcm$,\.png$
      pftelDB: "http://192.168.0.14:22223/api/v1/default/us_dicom_2/"
  - title: image-dcms-and-phi-removed-pngs-2
    plugin: pl-topologicalcopy v1.0.2
    previous: image-dcms-2
    plugin_parameter_defaults:
      plugininstances: image-dcms-2,phi-removed-image-pngs-2
      filter: \.dcm$,\.png$
      pftelDB: "http://192.168.0.14:22223/api/v1/default/us_dicom_2/"
  - title: converted-unpacked-dcms-2
    plugin: pl-dicommake v2.2.3
    previous: unpacked-dcms-and-phi-removed-pngs-2
    plugin_parameter_defaults:
      filterIMG: "**/*.png"
      pftelDB: "http://192.168.0.14:22223/api/v1/default/us_dicom_2/"
  - title: converted-image-dcms-2
    plugin: pl-dicommake v2.2.3
    previous: image-dcms-and-phi-removed-pngs-2
    plugin_parameter_defaults:
      filterIMG: "**/*.png"
      pftelDB: "http://192.168.0.14:22223/api/v1/default/us_dicom_2/"
  - title: repacked-dcms-2
    plugin: pl-dicom_repack v1.1.3        
    previous: converted-unpacked-dcms-2
    plugin_parameter_defaults:
      fileFilter: dcm
      pftelDB: "http://192.168.0.14:22223/api/v1/default/us_dicom_2/"
  - title: report-dcms-anonymized-2
    plugin: pl-dicom_headeredit v1.1.5
    previous: report-dcms-2
    plugin_parameter_defaults:
      fileFilter: ".dcm"
      tagInfo: "PatientName,%_name|patientID_PatientName ++ PatientID,%_md5|7_PatientID ++ AccessionNumber,%_md5|8_AccessionNumber ++ PatientBirthDate,%_strmsk|******01_PatientBirthDate ++ re:.*hysician,%_md5|4_#tag ++ re:.*stitution,#tag ++ re:.*ddress,#tag"
      splitToken: "++"
      splitKeyValue: ","
      pftelDB: "http://192.168.0.14:22223/api/v1/default/us_dicom_2/"
  - title: report-dcms-push-to-SYNAPSERESEARCH-2
    plugin: pl-orthanc_push v1.2.2
    previous: report-dcms-2
    plugin_parameter_defaults:
      inputFileFilter: "**/*.dcm"
      orthancUrl: http://galena.tch.harvard.edu:30030
      username: "admin"
      password: "mrK40zPQpYWE"
      pushToRemote: "SYNAPSERESEARCH"
      pftelDB: "http://192.168.0.14:22223/api/v1/default/us_dicom_2/"
  - title: image-dcms-anonymized-2
    plugin: pl-dicom_headeredit v1.1.5
    previous: converted-image-dcms-2
    plugin_parameter_defaults:
      fileFilter: ".dcm"
      tagInfo: "PatientName,%_name|patientID_PatientName ++ PatientID,%_md5|7_PatientID ++ AccessionNumber,%_md5|8_AccessionNumber ++ PatientBirthDate,%_strmsk|******01_PatientBirthDate ++ re:.*hysician,%_md5|4_#tag ++ re:.*stitution,#tag ++ re:.*ddress,#tag"
      splitToken: "++"
      splitKeyValue: ","
      pftelDB: "http://192.168.0.14:22223/api/v1/default/us_dicom_2/"
  - title: image-dcms-push-to-SYNAPSERESEARCH-2
    plugin: pl-orthanc_push v1.2.2
    previous: converted-image-dcms-2
    plugin_parameter_defaults:
      inputFileFilter: "**/*.dcm"
      orthancUrl: http://galena.tch.harvard.edu:30030
      username: "admin"
      password: "mrK40zPQpYWE"
      pushToRemote: "SYNAPSERESEARCH"
      pftelDB: "http://192.168.0.14:22223/api/v1/default/us_dicom_2/"
  - title: repacked-dcms-anonymized-2
    plugin: pl-dicom_headeredit v1.1.5
    previous: repacked-dcms-2
    plugin_parameter_defaults:
      fileFilter: ".dcm"
      tagInfo: "PatientName,%_name|patientID_PatientName ++ PatientID,%_md5|7_PatientID ++ AccessionNumber,%_md5|8_AccessionNumber ++ PatientBirthDate,%_strmsk|******01_PatientBirthDate ++ re:.*hysician,%_md5|4_#tag ++ re:.*stitution,#tag ++ re:.*ddress,#tag"
      splitToken: "++"
      splitKeyValue: ","
      pftelDB: "http://192.168.0.14:22223/api/v1/default/us_dicom_2/"
  - title: repacked-dcms-push-to-SYNAPSERESEARCH-2
    plugin: pl-orthanc_push v1.2.2
    previous: repacked-dcms-2
    plugin_parameter_defaults:
      inputFileFilter: "**/*.dcm"
      orthancUrl: http://galena.tch.harvard.edu:30030
      username: "admin"
      password: "mrK40zPQpYWE"
      pushToRemote: "SYNAPSERESEARCH"
      pftelDB: "http://192.168.0.14:22223/api/v1/default/us_dicom_2/"